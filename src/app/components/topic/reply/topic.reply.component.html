<section>
  <div class="row">
    <div class="col-3-of-4">
      <div class="breadcrumb">
        <div class="breadcrumb__section">
          <a class="breadcrumb__link" routerLink="/foro">Foro</a>
          <a *ngIf="forum_data.breadcrumb.parent" class="breadcrumb__link" routerLink="{{'/foro/' + forum_data.breadcrumb.parent._id}}">{{forum_data.breadcrumb.parent.name}}</a>
          <a class="breadcrumb__link" routerLink="{{'/foro/' + forum_data.breadcrumb.actual._id}}">{{forum_data.breadcrumb.actual.name}}</a>
          <a class="breadcrumb__link">Responder tema</a>
        </div>
      </div>
      <form class="topic" #topic_new="ngForm" (submit)="onSubmit()">
        <h1 class="heading u-margin-bottom-small">Comentar el tema <span class="heading--secondary"><a routerLink="{{'/foro/tema/' + topic_id}}">{{topic_data.topic_info.subject}}</a></span></h1>
        <div class="u-margin-bottom-medium">
          <a class="tab__link tab__link--horizontal tab__link--active" tab tab_id="new">Tu mensaje</a>
          <a class="tab__link tab__link--horizontal" tab tab_id="original">Mensaje original</a>
          <a *ngIf="quote_post" class="tab__link tab__link--horizontal" tab tab_id="quoted">Mensaje que citar√°s</a>
        </div>
        <div id="new" class="tab tab--active u-margin-bottom-medium paragraph--white">
          <ckeditor id="content" name="content" #content="ngModel" [(ngModel)]="post.content" tagName="editor" [editor]="editor"></ckeditor>
        </div>
        <div id="original" class="tab u-margin-bottom-medium">
          <div id="{{original_post.id}}" class="post">
            <div class="post__header">
              <a routerLink="{{'/' + original_post.writer.username}}"><img alt="Test" class="post__user-avatar" [class.post__user-avatar--online]="original_post.writer.last_seen === 'conectado'" src="{{'https://minotar.net/avatar/' + original_post.writer.skin}}"></a>
              <div class="post__placeholder">
                <div class="post__top">
                  <a class="post__username" [style.color]="original_post.writer.user_color" routerLink="{{'/' + original_post.writer.username}}">{{original_post.writer.username}}</a>
                  <div class="post__badges">
                    <a *ngFor="let badge of original_post.writer.badges" class="profile__badge" [routerLink]="badge.badge_link" [style.background-color]="badge.html_color">{{badge.name}}</a>
                  </div>
                </div>
                <span class="post__date" tooltip content="Creado en {{original_post.created_at | valueOf | amLocale: 'es' | amDateFormat:'MMMM Do YYYY, h:mm:ss a'}}" placement="bottom">{{original_post.created_at | valueOf | amLocale: 'es' | amTimeAgo}}</span>
              </div>
            </div>
            <div class="post__content">
              <p class="post__content-container" [innerHTML]="original_post.content | noSanitize"></p>
            </div>
          </div>
        </div>
        <div *ngIf="quote_post" id="quoted" class="tab u-margin-bottom-medium">
          <div id="{{quote_post.id}}" class="post">
            <div class="post__header">
              <a routerLink="{{'/' + quote_post.writer.username}}"><img alt="Test" class="post__user-avatar" [class.post__user-avatar--online]="quote_post.writer.last_seen === 'conectado'" src="{{'https://minotar.net/avatar/' + quote_post.writer.skin}}"></a>
              <div class="post__placeholder">
                <div class="post__top">
                  <a class="post__username" [style.color]="quote_post.writer.user_color" routerLink="{{'/' + quote_post.writer.username}}">{{quote_post.writer.username}}</a>
                  <div class="post__badges">
                    <a *ngFor="let badge of quote_post.writer.badges" class="profile__badge" [routerLink]="badge.badge_link" [style.background-color]="badge.html_color">{{badge.name}}</a>
                  </div>
                </div>
                <span class="post__date" tooltip content="Creado en {{quote_post.created_at | valueOf | amLocale: 'es' | amDateFormat:'MMMM Do YYYY, h:mm:ss a'}}" placement="bottom">{{quote_post.created_at | valueOf | amLocale: 'es' | amTimeAgo}}</span>
              </div>
            </div>
            <div class="post__content">
              <p class="post__content-container" [innerHTML]="quote_post.content | noSanitize"></p>
            </div>
          </div>
        </div>
        <div class="u-right-text u-margin-bottom-small">
          <button class="btn btn--secondary"><fa-icon [icon]="faComment" class="btn__icon--left"></fa-icon>Comentar tema</button>
        </div>
      </form>
    </div>
    <div class="col-1-of-4">
      <forum-feed></forum-feed>
    </div>
  </div>
</section>
