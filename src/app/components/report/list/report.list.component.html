<section>
  <div class="row u-margin-bottom-small">
    <div class="col-3-of-4">
      <h1 class="heading heading--primary">Lista de reportes</h1>
    </div>
    <div class="col-1-of-4">
      <div class="appeal__classifier">
        <div class="classifier">
        <span class="classifier__label" classifier>
          <span *ngIf="type == 'all'">Todos</span>
          <span *ngIf="type == 'open'">Abiertas</span>
          <span *ngIf="type == 'closed'">Cerradas</span>
          <span *ngIf="type == 'waiting'">Esperando</span>
        </span>
          <div class="classifier__content">
            <a href="{{'/reportes/' + page + '/all'}}" [class.classifier__option--active]="type =='all'" class="classifier__option">Todos</a>
            <a href="{{'/reportes/' + page + '/open'}}" [class.classifier__option--active]="type =='open'" class="classifier__option">Abiertas</a>
            <a href="{{'/reportes/' + page + '/closed'}}" [class.classifier__option--active]="type =='closed'" class="classifier__option">Cerradas</a>
            <a *ngIf="can_assign" href="{{'/reportes/' + page + '/waiting'}}" [class.classifier__option--active]="type =='waiting'" class="classifier__option">Esperando</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="table--black table--fixed">
    <div class="table__header">
      <div class="table__cell report__table-small report__hidden">
        <p>Reportador</p>
      </div>
      <div class="table__cell report__table-small">
        <p>Involucrado</p>
      </div>
      <div class="table__cell report__table-large report__hidden">
        <p>Encargado</p>
      </div>
      <div class="table__cell report__table-small report__hidden">
        <p>Fecha</p>
      </div>
      <div class="table__cell report__table-buttons">
        <p>Acciones</p>
      </div>
    </div>
    <div *ngFor="let report of reports" class="table__row">
      <div class="table__cell report__table-small report__hidden">
        <a routerLink="{{'/' + report.creator.username}}" [style.color]="report.creator.user_color">{{report.creator.username}}</a>
      </div>
      <div class="table__cell report__table-small">
        <a routerLink="{{'/' + report.involved.username}}" [style.color]="report.involved.user_color">{{report.involved.username}}</a>
      </div>
      <div class="table__cell report__table-large report__hidden">
        <span *ngIf="!report.assigned">Esperando Asignaci√≥n</span>
        <a *ngIf="report.assigned" routerLink="{{'/' + report.assigned.username}}" [style.color]="report.assigned.user_color">{{report.assigned.username}}</a>
      </div>
      <div class="table__cell report__table-small report__hidden">
        <span>{{report.created_at | valueOf | amLocale: 'es' | amTimeAgo}}</span>
      </div>
      <div class="table__cell report__table-buttons">
        <a *ngIf="!report.assigned" (click)="assignReport(report.id)" class="btn btn--blue shop__description-slug-button shop__cart-button">Asignar</a>
        <a *ngIf="report.assigned" routerLink="{{'/reportar/' + report.id}}" class="btn btn--blue shop__description-slug-button shop__cart-button">Ver</a>
      </div>
    </div>
  </div>
  <p *ngIf="!reports" class="u-center-text u-margin-top-small paragraph--white">No se han encontrado reportes.</p>
  <pagination [centered]="true" [actual_page]="page" [last_page]="pages" [route]="'/reportes/'"></pagination>
</section>
